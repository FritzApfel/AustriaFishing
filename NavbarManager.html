class NavbarManager {
  constructor(navbarId = 'navbar', loginLinkId = 'login-link') {
    this.navbar = document.getElementById(navbarId);
    this.loginLink = document.getElementById(loginLinkId);
    this.userKey = 'userLoggedIn';
    this.updateNavbar();
  }

  updateNavbar() {
    const user = localStorage.getItem(this.userKey);

    // Alte Elemente entfernen
    this.removeElement('user-email-span');
    this.removeElement('logout-btn');

    if (user) {
      // Login-Link verstecken
      this.loginLink.style.display = 'none';

      // Benutzername anzeigen
      const userSpan = document.createElement('span');
      userSpan.id = 'user-email-span';
      userSpan.textContent = `Angemeldet als ${user}`;
      userSpan.style.margin = '0 10px';

      // Logout-Button erstellen
      const logoutBtn = document.createElement('button');
      logoutBtn.id = 'logout-btn';
      logoutBtn.textContent = 'Abmelden';
      logoutBtn.addEventListener('click', () => this.logout());

      // Elemente ans Navbar anh√§ngen
      this.navbar.appendChild(userSpan);
      this.navbar.appendChild(logoutBtn);

    } else {
      // Login-Link anzeigen
      this.loginLink.style.display = 'inline';
    }
  }

  logout() {
    localStorage.removeItem(this.userKey);
    alert("Sie wurden abgemeldet.");
    location.reload();
  }

  removeElement(id) {
    const el = document.getElementById(id);
    if (el) el.remove();
  }
}
