<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Austria Fishing</title>
    <style>
        body {
          font-family: Arial, sans-serif;
          background: #f0f4f8;
          margin: 0; padding: 20px;
          color: #333;
        }
        header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 20px;
        }
        header h1 {
          margin: 0;
        }
        #cart-button {
          background-color: #007BFF;
          border: none;
          color: white;
          padding: 10px 18px;
          border-radius: 25px;
          cursor: pointer;
          font-weight: bold;
          position: relative;
        }
        #cart-count {
          position: absolute;
          top: -8px;
          right: -8px;
          background: red;
          color: white;
          font-size: 0.8em;
          font-weight: bold;
          width: 20px;
          height: 20px;
          border-radius: 50%;
          display: flex;
          justify-content: center;
          align-items: center;
        }
        #search-input {
          width: 100%;
          max-width: 400px;
          padding: 10px 15px;
          font-size: 1em;
          border-radius: 25px;
          border: 2px solid #007BFF;
          margin-bottom: 25px;
          outline: none;
        }
        #products {
          display: grid;
          grid-template-columns: repeat(auto-fit,minmax(220px,1fr));
          gap: 25px;
        }
        .product {
          background: white;
          border-radius: 12px;
          box-shadow: 0 3px 10px rgb(0 0 0 / 0.1);
          padding: 15px;
          text-align: center;
        }
        .product img {
          max-width: 150px;
          height: auto;
          margin-bottom: 12px;
        }
        .product-name {
          font-weight: 700;
          margin-bottom: 8px;
          font-size: 1.1em;
        }
        .product-price {
          color: #007BFF;
          font-weight: 600;
          margin-bottom: 12px;
        }
        .add-btn {
          background-color: #007BFF;
          color: white;
          border: none;
          padding: 10px 20px;
          border-radius: 25px;
          cursor: pointer;
          font-weight: bold;
          transition: background-color 0.3s ease;
        }
        .add-btn:hover {
          background-color: #0056b3;
        }
        #cart-modal {
          display: none;
          position: fixed;
          top: 80px;
          right: 20px;
          width: 320px;
          max-height: 400px;
          overflow-y: auto;
          background: white;
          box-shadow: 0 4px 15px rgba(0,0,0,0.2);
          border-radius: 10px;
          padding: 20px;
          z-index: 1000;
        }
        #cart-modal h3 {
          margin-top: 0;
          margin-bottom: 15px;
          border-bottom: 1px solid #ddd;
          padding-bottom: 8px;
        }
        #cart-items {
          list-style: none;
          padding: 0;
          margin: 0;
        }
        #cart-items li {
          display: flex;
          justify-content: space-between;
          margin-bottom: 12px;
          border-bottom: 1px solid #eee;
          padding-bottom: 6px;
        }
        #cart-items .item-name {
          flex-grow: 1;
          text-align: left;
        }
        #cart-items .item-qty {
          margin: 0 10px;
        }
        #cart-items .remove-btn {
          background: transparent;
          border: none;
          color: red;
          font-weight: bold;
          cursor: pointer;
        }
        #overlay {
          display: none;
          position: fixed;
          top:0; left:0; right:0; bottom:0;
          background: rgba(0,0,0,0.4);
          z-index: 999;
        }
        footer {
          margin-top: 60px;
          font-size: 0.9em;
          color: #777;
          text-align: center;
        }
    </style>
</head>
<body>

<header>
    <h1>Austria Fishing</h1>
    <button id="cart-button">Warenkorb <span id="cart-count">0</span></button>
</header>

<input type="text" id="search-input" placeholder="Produkte suchen..." />

<section id="products"></section>

<!-- Warenkorb Modal -->
<div id="overlay"></div>
<div id="cart-modal">
    <h3>Warenkorb</h3>
    <ul id="cart-items"></ul>
    <p id="cart-empty">Dein Warenkorb ist leer.</p>
</div>

<footer>
    <p>Gegründet von Fabian Danbauer und Oscar Haider</p>
</footer>

<script>
    class ShoppingCart {
      constructor(products) {
        this.products = products;
        this.cart = {};
        this.productsContainer = document.getElementById("products");
        this.cartCount = document.getElementById("cart-count");
        this.cartButton = document.getElementById("cart-button");
        this.cartModal = document.getElementById("cart-modal");
        this.cartItemsList = document.getElementById("cart-items");
        this.cartEmptyMsg = document.getElementById("cart-empty");
        this.overlay = document.getElementById("overlay");
        this.searchInput = document.getElementById("search-input");

        this.init();
      }

      init() {
        this.renderProducts();
        this.updateCartCount();
        this.attachEventListeners();
      }

      renderProducts(filter = "") {
        this.productsContainer.innerHTML = "";
        const filtered = this.products.filter(p => p.name.toLowerCase().includes(filter.toLowerCase()));
        if(filtered.length === 0) {
          this.productsContainer.innerHTML = "<p>Keine Produkte gefunden.</p>";
          return;
        }
        filtered.forEach(p => {
          const productDiv = document.createElement("div");
          productDiv.className = "product";
          productDiv.innerHTML = `
            <img src="${p.img}" alt="${p.name}">
            <div class="product-name">${p.name}</div>
            <div class="product-price">${p.price} €</div>
            <button class="add-btn" data-id="${p.id}">In den Warenkorb</button>
          `;
          this.productsContainer.appendChild(productDiv);
        });
      }

      updateCartCount() {
        const totalItems = Object.values(this.cart).reduce((sum, item) => sum + item.qty, 0);
        this.cartCount.textContent = totalItems;
      }

      renderCart() {
        this.cartItemsList.innerHTML = "";
        const keys = Object.keys(this.cart);
        if(keys.length === 0) {
          this.cartEmptyMsg.style.display = "block";
          return;
        }
        this.cartEmptyMsg.style.display = "none";

        keys.forEach(id => {
          const item = this.cart[id];
          const li = document.createElement("li");
          li.innerHTML = `
            <span class="item-name">${item.name}</span>
            <span class="item-qty">x${item.qty}</span>
            <button class="remove-btn" data-id="${id}">&times;</button>
          `;
          this.cartItemsList.appendChild(li);
        });
      }

      addToCart(id) {
        const product = this.products.find(p => p.id === id);
        if(!product) return;

        if(this.cart[id]) {
          this.cart[id].qty++;
        } else {
          this.cart[id] = { ...product, qty: 1 };
        }
        this.updateCartCount();
      }

      removeFromCart(id) {
        if(!this.cart[id]) return;
        this.cart[id].qty--;
        if(this.cart[id].qty <= 0) {
          delete this.cart[id];
        }
        this.updateCartCount();
        this.renderCart();
      }

      attachEventListeners() {
        this.productsContainer.addEventListener("click", e => {
          if(e.target.classList.contains("add-btn")) {
            const id = Number(e.target.dataset.id);
            this.addToCart(id);
          }
        });

        this.cartButton.addEventListener("click", () => {
          if(this.cartModal.style.display === "block") {
            this.cartModal.style.display = "none";
            this.overlay.style.display = "none";
          } else {
            this.renderCart();
            this.cartModal.style.display = "block";
            this.overlay.style.display = "block";
          }
        });

        this.overlay.addEventListener("click", () => {
          this.cartModal.style.display = "none";
          this.overlay.style.display = "none";
        });

        this.cartItemsList.addEventListener("click", e => {
          if(e.target.classList.contains("remove-btn")) {
            const id = Number(e.target.dataset.id);
            this.removeFromCart(id);
          }
        });

        this.searchInput.addEventListener("input", () => {
          this.renderProducts(this.searchInput.value);
        });
      }
    }

    const products = [
      { id: 1, name: "Angel", price: 1, img: "angel1.png" },
      { id: 2, name: "Köderfisch", price: 1, img: "köder1.png" }
    ];

    const shoppingCart = new ShoppingCart(products);
</script>

</body>
</html>
