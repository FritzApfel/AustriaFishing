<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Shop – Austria Fishing</title>
    <style>
        body {
          font-family: Arial, sans-serif;
          background: #f7f9fc;
          padding: 20px 20px 80px 20px;
          color: #222;
          max-width: 900px;
          margin: auto;
          position: relative;
          min-height: 100vh;
        }

        header {
          text-align: center;
          margin-bottom: 30px;
        }

        header img {
          max-width: 180px;
          height: auto;
          margin-bottom: 15px;
        }

        nav {
          display: flex;
          gap: 20px;
          justify-content: center;
          margin-bottom: 40px;
        }

        nav a {
          text-decoration: none;
          font-weight: bold;
          color: black;
          font-size: 1.1em;
          transition: color 0.3s;
        }
        nav a:hover {
          color: #007BFF;
        }

        h1 {
          text-align: center;
          color: black;
          margin-top: 0;
          margin-bottom: 40px;
        }

        .products {
          display: grid;
          grid-template-columns: repeat(auto-fill,minmax(250px,1fr));
          gap: 25px;
        }

        .product {
          background: white;
          border-radius: 12px;
          box-shadow: 0 3px 10px rgba(0,0,0,0.1);
          padding: 15px;
          text-align: center;
          display: flex;
          flex-direction: column;
          justify-content: space-between;
        }

        .product img {
          max-width: 100%;
          height: 160px;
          object-fit: contain;
          margin-bottom: 15px;
          border-radius: 8px;
        }

        .product h2 {
          font-size: 1.2em;
          margin: 0 0 10px;
          color: #222;
        }

        .price {
          font-weight: bold;
          margin-bottom: 15px;
          color: #007BFF;
          font-size: 1.1em;
        }

        button.add-to-cart {
          background-color: #007BFF;
          color: white;
          border: none;
          padding: 10px 15px;
          border-radius: 25px;
          cursor: pointer;
          font-weight: bold;
          font-size: 1em;
          transition: background-color 0.3s;
        }
        button.add-to-cart:hover {
          background-color: #0056b3;
        }

        #cart-button {
          position: fixed;
          top: 20px;
          right: 20px;
          background-color: #007BFF;
          border: none;
          color: white;
          padding: 10px 18px;
          border-radius: 25px;
          cursor: pointer;
          font-weight: bold;
          z-index: 1100;
        }

        #cart-count {
          position: absolute;
          top: -8px;
          right: -8px;
          background: red;
          color: white;
          font-size: 0.8em;
          font-weight: bold;
          width: 20px;
          height: 20px;
          border-radius: 50%;
          display: flex;
          justify-content: center;
          align-items: center;
        }

        #cart-modal {
          display: none;
          position: fixed;
          top: 60px;
          right: 20px;
          width: 320px;
          max-height: 400px;
          overflow-y: auto;
          background: white;
          color: black;
          box-shadow: 0 4px 15px rgba(0,0,0,0.3);
          border-radius: 10px;
          padding: 20px;
          z-index: 1101;
        }

        #cart-items {
          list-style: none;
          padding: 0;
          margin: 0;
        }

        #cart-items li {
          display: flex;
          justify-content: space-between;
          margin-bottom: 12px;
          border-bottom: 1px solid #eee;
          padding-bottom: 6px;
        }

        #cart-items .remove-btn {
          background: transparent;
          border: none;
          color: red;
          font-weight: bold;
          cursor: pointer;
        }

        #cart-empty {
          margin-top: 10px;
          font-style: italic;
          color: #555;
        }

        #overlay {
          display: none;
          position: fixed;
          top: 0; left: 0; right: 0; bottom: 0;
          background: rgba(0,0,0,0.4);
          z-index: 1100;
        }
    </style>
</head>
<body>

<header>
    <img src="logo.png" alt="Austria Fishing Logo" />
</header>

<nav>
    <a href="index.html">Shop</a>
    <a href="infos.html">Infos</a>
    <a href="impressum.html">Impressum</a>
</nav>

<h1>Unsere Produkte</h1>

<div class="products" id="products-list">
    <!-- Produkte per JS eingefügt -->
</div>

<button id="cart-button">
    Warenkorb <span id="cart-count">0</span>
</button>

<div id="overlay"></div>

<div id="cart-modal">
    <h3>Warenkorb</h3>
    <ul id="cart-items"></ul>
    <p id="cart-empty">Dein Warenkorb ist leer.</p>
</div>

<script>
    const products = [
      {
        id: 'p1',
        name: 'Köder Set 1',
        price: 12.99,
        img: 'köder1.png',
      },
      {
        id: 'p2',
        name: 'Köder Set 2',
        price: 14.99,
        img: 'köder2.png',
      },
      {
        id: 'p3',
        name: 'Köder Set 3',
        price: 16.99,
        img: 'köder3.png',
      },
      {
        id: 'p4',
        name: 'Angelrute Modell 1',
        price: 49.99,
        img: 'angel1.png',
      }
    ];

    const productsList = document.getElementById('products-list');

    function createProductHTML(product) {
      const div = document.createElement('div');
      div.className = 'product';
      div.innerHTML = `
        <img src="${product.img}" alt="${product.name}" />
        <h2>${product.name}</h2>
        <div class="price">${product.price.toFixed(2)} €</div>
        <button class="add-to-cart" data-id="${product.id}">In den Warenkorb</button>
      `;
      return div;
    }

    products.forEach(product => {
      productsList.appendChild(createProductHTML(product));
    });

    class ShoppingCart {
      constructor() {
        this.cart = {};
        this.cartCount = document.getElementById('cart-count');
        this.cartButton = document.getElementById('cart-button');
        this.cartModal = document.getElementById('cart-modal');
        this.cartItemsList = document.getElementById('cart-items');
        this.cartEmptyMsg = document.getElementById('cart-empty');
        this.overlay = document.getElementById('overlay');

        this.attachEventListeners();
        this.updateCartCount();
      }

      updateCartCount() {
        const totalItems = Object.values(this.cart).reduce((sum, item) => sum + item.qty, 0);
        this.cartCount.textContent = totalItems;
      }

      renderCart() {
        this.cartItemsList.innerHTML = '';
        const keys = Object.keys(this.cart);
        if (keys.length === 0) {
          this.cartEmptyMsg.style.display = 'block';
          return;
        }
        this.cartEmptyMsg.style.display = 'none';
        keys.forEach(id => {
          const item = this.cart[id];
          const li = document.createElement('li');
          li.innerHTML = `
            <span>${item.name}</span>
            <span>x${item.qty}</span>
            <button class="remove-btn" data-id="${id}">&times;</button>
          `;
          this.cartItemsList.appendChild(li);
        });
      }

      addToCart(id) {
        const product = products.find(p => p.id === id);
        if (!product) return;
        if (!this.cart[id]) {
          this.cart[id] = { ...product, qty: 1 };
        } else {
          this.cart[id].qty++;
        }
        this.updateCartCount();
        this.renderCart();
      }

      removeFromCart(id) {
        if (!this.cart[id]) return;
        this.cart[id].qty--;
        if (this.cart[id].qty <= 0) {
          delete this.cart[id];
        }
        this.updateCartCount();
        this.renderCart();
      }

      attachEventListeners() {
        this.cartButton.addEventListener('click', () => {
          if (this.cartModal.style.display === 'block') {
            this.cartModal.style.display = 'none';
            this.overlay.style.display = 'none';
          } else {
            this.cartModal.style.display = 'block';
            this.overlay.style.display = 'block';
            this.renderCart();
          }
        });

        this.overlay.addEventListener('click', () => {
          this.cartModal.style.display = 'none';
          this.overlay.style.display = 'none';
        });

        productsList.addEventListener('click', e => {
          if (e.target.classList.contains('add-to-cart')) {
            const id = e.target.getAttribute('data-id');
            this.addToCart(id);
          }
        });

        this.cartItemsList.addEventListener('click', e => {
          if (e.target.classList.contains('remove-btn')) {
            const id = e.target.getAttribute('data-id');
            this.removeFromCart(id);
          }
        });
      }
    }

    const shoppingCart = new ShoppingCart();
</script>

</body>
</html>
